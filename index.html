<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'/>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="hanmomhanda's gist viewer">
  <link rel='stylesheet' href='css/style.css'/>
</head>
<body>
  <h1>bsNet-GistView Test</h1>
  <a id='user-gravatar' target='_blank'></a>
  <div id='gistStage'></div>
  <script src="lib/Showdown.min.js"></script>
  <script src='http://projectbs.github.io/bsNet/bsNet.0.2.js'></script>
  <script>
  var stage = document.getElementById('gistStage'),
      hash = document.location.hash,
      githubID = hash.substr(1, hash.lastIndexOf('#')-1);
      gistID = hash.substr(hash.lastIndexOf('#')+1);

  var end = function(data) {
      if (data) {
          var rObj = JSON.parse(data),
              owner = rObj.owner,
              files = rObj.files
          ;
          document.getElementById('user-gravatar').innerHTML = '<img src="' + owner.avatar_url + ' class="user-gravatar" width="70px" height="70px"/>';
      }
  };
  bsNet.get(end, 'https://api.github.com/gists/' + gistID, '@User-Agent', githubID);
  </script>
</body>
</html>